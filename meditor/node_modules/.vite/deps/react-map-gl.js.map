{"version":3,"file":"react-map-gl.js","names":["useMap","result","useLayoutEffect","useEffect","mapLib","Map","mapLib","Marker","mapLib","Popup","mapLib","AttributionControl","useControl","mapLib","FullscreenControl","useControl","mapLib","GeolocateControl","useControl","mapLib","NavigationControl","useControl","mapLib","ScaleControl","useControl","mapLib","Layer","Source","_useMap","Map","_Map","_Marker","_Popup","_AttributionControl","_FullscreenControl","_NavigationControl","_GeolocateControl","_ScaleControl","_Layer","_Source"],"sources":["../../react-map-gl/dist/esm/components/use-map.js","../../react-map-gl/dist/esm/utils/deep-equal.js","../../react-map-gl/dist/esm/utils/transform.js","../../react-map-gl/dist/esm/utils/style-utils.js","../../react-map-gl/dist/esm/mapbox/mapbox.js","../../react-map-gl/dist/esm/mapbox/create-ref.js","../../react-map-gl/dist/esm/utils/use-isomorphic-layout-effect.js","../../react-map-gl/dist/esm/utils/set-globals.js","../../react-map-gl/dist/esm/components/map.js","../../react-map-gl/dist/esm/utils/apply-react-style.js","../../react-map-gl/dist/esm/components/marker.js","../../react-map-gl/dist/esm/components/popup.js","../../react-map-gl/dist/esm/components/use-control.js","../../react-map-gl/dist/esm/components/attribution-control.js","../../react-map-gl/dist/esm/components/fullscreen-control.js","../../react-map-gl/dist/esm/components/geolocate-control.js","../../react-map-gl/dist/esm/components/navigation-control.js","../../react-map-gl/dist/esm/components/scale-control.js","../../react-map-gl/dist/esm/utils/assert.js","../../react-map-gl/dist/esm/components/layer.js","../../react-map-gl/dist/esm/components/source.js","../../react-map-gl/dist/esm/exports-mapbox.js"],"sourcesContent":["import * as React from 'react';\nimport { useState, useCallback, useMemo, useContext } from 'react';\nimport { MapContext } from './map';\nexport const MountedMapsContext = React.createContext(null);\nexport const MapProvider = props => {\n    const [maps, setMaps] = useState({});\n    const onMapMount = useCallback((map, id = 'default') => {\n        setMaps(currMaps => {\n            if (id === 'current') {\n                throw new Error(\"'current' cannot be used as map id\");\n            }\n            if (currMaps[id]) {\n                throw new Error(`Multiple maps with the same id: ${id}`);\n            }\n            return { ...currMaps, [id]: map };\n        });\n    }, []);\n    const onMapUnmount = useCallback((id = 'default') => {\n        setMaps(currMaps => {\n            if (currMaps[id]) {\n                const nextMaps = { ...currMaps };\n                delete nextMaps[id];\n                return nextMaps;\n            }\n            return currMaps;\n        });\n    }, []);\n    return (React.createElement(MountedMapsContext.Provider, { value: {\n            maps,\n            onMapMount,\n            onMapUnmount\n        } }, props.children));\n};\nexport function useMap() {\n    var _a;\n    const maps = (_a = useContext(MountedMapsContext)) === null || _a === void 0 ? void 0 : _a.maps;\n    const currentMap = useContext(MapContext);\n    const mapsWithCurrent = useMemo(() => {\n        return { ...maps, current: currentMap === null || currentMap === void 0 ? void 0 : currentMap.map };\n    }, [maps, currentMap]);\n    return mapsWithCurrent;\n}\n//# sourceMappingURL=use-map.js.map","/**\n * Compare two points\n * @param a\n * @param b\n * @returns true if the points are equal\n */\nexport function arePointsEqual(a, b) {\n    const ax = Array.isArray(a) ? a[0] : a ? a.x : 0;\n    const ay = Array.isArray(a) ? a[1] : a ? a.y : 0;\n    const bx = Array.isArray(b) ? b[0] : b ? b.x : 0;\n    const by = Array.isArray(b) ? b[1] : b ? b.y : 0;\n    return ax === bx && ay === by;\n}\n/* eslint-disable complexity */\n/**\n * Compare any two objects\n * @param a\n * @param b\n * @returns true if the objects are deep equal\n */\nexport function deepEqual(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b) {\n        return false;\n    }\n    if (Array.isArray(a)) {\n        if (!Array.isArray(b) || a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n            if (!deepEqual(a[i], b[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    else if (Array.isArray(b)) {\n        return false;\n    }\n    if (typeof a === 'object' && typeof b === 'object') {\n        const aKeys = Object.keys(a);\n        const bKeys = Object.keys(b);\n        if (aKeys.length !== bKeys.length) {\n            return false;\n        }\n        for (const key of aKeys) {\n            if (!b.hasOwnProperty(key)) {\n                return false;\n            }\n            if (!deepEqual(a[key], b[key])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=deep-equal.js.map","import { deepEqual } from './deep-equal';\n/**\n * Make a copy of a transform\n * @param tr\n */\nexport function cloneTransform(tr) {\n    const newTransform = tr.clone();\n    // Work around mapbox bug - this value is not assigned in clone(), only in resize()\n    newTransform.pixelsToGLUnits = tr.pixelsToGLUnits;\n    return newTransform;\n}\n/**\n * Copy projection from one transform to another. This only applies to mapbox-gl transforms\n * @param src the transform to copy projection settings from\n * @param dest to transform to copy projection settings to\n */\nexport function syncProjection(src, dest) {\n    if (!src.getProjection) {\n        return;\n    }\n    const srcProjection = src.getProjection();\n    const destProjection = dest.getProjection();\n    if (!deepEqual(srcProjection, destProjection)) {\n        dest.setProjection(srcProjection);\n    }\n}\n/**\n * Capture a transform's current state\n * @param transform\n * @returns descriptor of the view state\n */\nexport function transformToViewState(tr) {\n    return {\n        longitude: tr.center.lng,\n        latitude: tr.center.lat,\n        zoom: tr.zoom,\n        pitch: tr.pitch,\n        bearing: tr.bearing,\n        padding: tr.padding\n    };\n}\n/* eslint-disable complexity */\n/**\n * Mutate a transform to match the given view state\n * @param transform\n * @param viewState\n * @returns true if the transform has changed\n */\nexport function applyViewStateToTransform(tr, props) {\n    const v = props.viewState || props;\n    let changed = false;\n    if ('zoom' in v) {\n        const zoom = tr.zoom;\n        tr.zoom = v.zoom;\n        changed = changed || zoom !== tr.zoom;\n    }\n    if ('bearing' in v) {\n        const bearing = tr.bearing;\n        tr.bearing = v.bearing;\n        changed = changed || bearing !== tr.bearing;\n    }\n    if ('pitch' in v) {\n        const pitch = tr.pitch;\n        tr.pitch = v.pitch;\n        changed = changed || pitch !== tr.pitch;\n    }\n    if (v.padding && !tr.isPaddingEqual(v.padding)) {\n        changed = true;\n        tr.padding = v.padding;\n    }\n    if ('longitude' in v && 'latitude' in v) {\n        const center = tr.center;\n        // @ts-ignore\n        tr.center = new center.constructor(v.longitude, v.latitude);\n        changed = changed || center !== tr.center;\n    }\n    return changed;\n}\n//# sourceMappingURL=transform.js.map","const refProps = ['type', 'source', 'source-layer', 'minzoom', 'maxzoom', 'filter', 'layout'];\n// Prepare a map style object for diffing\n// If immutable - convert to plain object\n// Work around some issues in older styles that would fail Mapbox's diffing\nexport function normalizeStyle(style) {\n    if (!style) {\n        return null;\n    }\n    if (typeof style === 'string') {\n        return style;\n    }\n    if ('toJS' in style) {\n        style = style.toJS();\n    }\n    if (!style.layers) {\n        return style;\n    }\n    const layerIndex = {};\n    for (const layer of style.layers) {\n        layerIndex[layer.id] = layer;\n    }\n    const layers = style.layers.map(layer => {\n        let normalizedLayer = null;\n        if ('interactive' in layer) {\n            normalizedLayer = Object.assign({}, layer);\n            // Breaks style diffing :(\n            // @ts-ignore legacy field not typed\n            delete normalizedLayer.interactive;\n        }\n        // Style diffing doesn't work with refs so expand them out manually before diffing.\n        // @ts-ignore legacy field not typed\n        const layerRef = layerIndex[layer.ref];\n        if (layerRef) {\n            normalizedLayer = normalizedLayer || Object.assign({}, layer);\n            // @ts-ignore\n            delete normalizedLayer.ref;\n            // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/deref.js\n            for (const propName of refProps) {\n                if (propName in layerRef) {\n                    normalizedLayer[propName] = layerRef[propName];\n                }\n            }\n        }\n        return normalizedLayer || layer;\n    });\n    // Do not mutate the style object provided by the user\n    return { ...style, layers };\n}\n//# sourceMappingURL=style-utils.js.map","import { transformToViewState, applyViewStateToTransform, cloneTransform, syncProjection } from '../utils/transform';\nimport { normalizeStyle } from '../utils/style-utils';\nimport { deepEqual } from '../utils/deep-equal';\nconst DEFAULT_STYLE = { version: 8, sources: {}, layers: [] };\nconst pointerEvents = {\n    mousedown: 'onMouseDown',\n    mouseup: 'onMouseUp',\n    mouseover: 'onMouseOver',\n    mousemove: 'onMouseMove',\n    click: 'onClick',\n    dblclick: 'onDblClick',\n    mouseenter: 'onMouseEnter',\n    mouseleave: 'onMouseLeave',\n    mouseout: 'onMouseOut',\n    contextmenu: 'onContextMenu',\n    touchstart: 'onTouchStart',\n    touchend: 'onTouchEnd',\n    touchmove: 'onTouchMove',\n    touchcancel: 'onTouchCancel'\n};\nconst cameraEvents = {\n    movestart: 'onMoveStart',\n    move: 'onMove',\n    moveend: 'onMoveEnd',\n    dragstart: 'onDragStart',\n    drag: 'onDrag',\n    dragend: 'onDragEnd',\n    zoomstart: 'onZoomStart',\n    zoom: 'onZoom',\n    zoomend: 'onZoomEnd',\n    rotatestart: 'onRotateStart',\n    rotate: 'onRotate',\n    rotateend: 'onRotateEnd',\n    pitchstart: 'onPitchStart',\n    pitch: 'onPitch',\n    pitchend: 'onPitchEnd'\n};\nconst otherEvents = {\n    wheel: 'onWheel',\n    boxzoomstart: 'onBoxZoomStart',\n    boxzoomend: 'onBoxZoomEnd',\n    boxzoomcancel: 'onBoxZoomCancel',\n    resize: 'onResize',\n    load: 'onLoad',\n    render: 'onRender',\n    idle: 'onIdle',\n    remove: 'onRemove',\n    data: 'onData',\n    styledata: 'onStyleData',\n    sourcedata: 'onSourceData',\n    error: 'onError'\n};\nconst settingNames = [\n    'minZoom',\n    'maxZoom',\n    'minPitch',\n    'maxPitch',\n    'maxBounds',\n    'projection',\n    'renderWorldCopies'\n];\nconst handlerNames = [\n    'scrollZoom',\n    'boxZoom',\n    'dragRotate',\n    'dragPan',\n    'keyboard',\n    'doubleClickZoom',\n    'touchZoomRotate',\n    'touchPitch'\n];\n/**\n * A wrapper for mapbox-gl's Map class\n */\nexport default class Mapbox {\n    constructor(MapClass, props, container) {\n        // mapboxgl.Map instance\n        this._map = null;\n        // Internal states\n        this._internalUpdate = false;\n        this._inRender = false;\n        this._hoveredFeatures = null;\n        this._deferredEvents = {\n            move: false,\n            zoom: false,\n            pitch: false,\n            rotate: false\n        };\n        this._onEvent = (e) => {\n            // @ts-ignore\n            const cb = this.props[otherEvents[e.type]];\n            if (cb) {\n                cb(e);\n            }\n            else if (e.type === 'error') {\n                console.error(e.error); // eslint-disable-line\n            }\n        };\n        this._onPointerEvent = (e) => {\n            if (e.type === 'mousemove' || e.type === 'mouseout') {\n                this._updateHover(e);\n            }\n            // @ts-ignore\n            const cb = this.props[pointerEvents[e.type]];\n            if (cb) {\n                if (this.props.interactiveLayerIds && e.type !== 'mouseover' && e.type !== 'mouseout') {\n                    e.features = this._hoveredFeatures || this._queryRenderedFeatures(e.point);\n                }\n                cb(e);\n                delete e.features;\n            }\n        };\n        this._onCameraEvent = (e) => {\n            if (!this._internalUpdate) {\n                // @ts-ignore\n                const cb = this.props[cameraEvents[e.type]];\n                if (cb) {\n                    cb(e);\n                }\n            }\n            if (e.type in this._deferredEvents) {\n                this._deferredEvents[e.type] = false;\n            }\n        };\n        this._MapClass = MapClass;\n        this.props = props;\n        this._initialize(container);\n    }\n    get map() {\n        return this._map;\n    }\n    get transform() {\n        return this._renderTransform;\n    }\n    setProps(props) {\n        const oldProps = this.props;\n        this.props = props;\n        const settingsChanged = this._updateSettings(props, oldProps);\n        if (settingsChanged) {\n            this._createShadowTransform(this._map);\n        }\n        const sizeChanged = this._updateSize(props);\n        const viewStateChanged = this._updateViewState(props, true);\n        this._updateStyle(props, oldProps);\n        this._updateStyleComponents(props, oldProps);\n        this._updateHandlers(props, oldProps);\n        // If 1) view state has changed to match props and\n        //    2) the props change is not triggered by map events,\n        // it's driven by an external state change. Redraw immediately\n        if (settingsChanged || sizeChanged || (viewStateChanged && !this._map.isMoving())) {\n            this.redraw();\n        }\n    }\n    static reuse(props, container) {\n        const that = Mapbox.savedMaps.pop();\n        if (!that) {\n            return null;\n        }\n        const map = that.map;\n        // When reusing the saved map, we need to reparent the map(canvas) and other child nodes\n        // intoto the new container from the props.\n        // Step 1: reparenting child nodes from old container to new container\n        const oldContainer = map.getContainer();\n        container.className = oldContainer.className;\n        while (oldContainer.childNodes.length > 0) {\n            container.appendChild(oldContainer.childNodes[0]);\n        }\n        // Step 2: replace the internal container with new container from the react component\n        // @ts-ignore\n        map._container = container;\n        // With maplibre-gl as mapLib, map uses ResizeObserver to observe when its container resizes.\n        // When reusing the saved map, we need to disconnect the observer and observe the new container.\n        // Step 3: telling the ResizeObserver to disconnect and observe the new container\n        // @ts-ignore\n        const resizeObserver = map._resizeObserver;\n        if (resizeObserver) {\n            resizeObserver.disconnect();\n            resizeObserver.observe(container);\n        }\n        // Step 4: apply new props\n        that.setProps({ ...props, styleDiffing: false });\n        map.resize();\n        const { initialViewState } = props;\n        if (initialViewState) {\n            if (initialViewState.bounds) {\n                map.fitBounds(initialViewState.bounds, { ...initialViewState.fitBoundsOptions, duration: 0 });\n            }\n            else {\n                that._updateViewState(initialViewState, false);\n            }\n        }\n        // Simulate load event\n        if (map.isStyleLoaded()) {\n            map.fire('load');\n        }\n        else {\n            map.once('styledata', () => map.fire('load'));\n        }\n        // Force reload\n        // @ts-ignore\n        map._update();\n        return that;\n    }\n    /* eslint-disable complexity,max-statements */\n    _initialize(container) {\n        const { props } = this;\n        const { mapStyle = DEFAULT_STYLE } = props;\n        const mapOptions = {\n            ...props,\n            ...props.initialViewState,\n            accessToken: props.mapboxAccessToken || getAccessTokenFromEnv() || null,\n            container,\n            style: normalizeStyle(mapStyle)\n        };\n        const viewState = mapOptions.initialViewState || mapOptions.viewState || mapOptions;\n        Object.assign(mapOptions, {\n            center: [viewState.longitude || 0, viewState.latitude || 0],\n            zoom: viewState.zoom || 0,\n            pitch: viewState.pitch || 0,\n            bearing: viewState.bearing || 0\n        });\n        if (props.gl) {\n            // eslint-disable-next-line\n            const getContext = HTMLCanvasElement.prototype.getContext;\n            // Hijack canvas.getContext to return our own WebGLContext\n            // This will be called inside the mapboxgl.Map constructor\n            // @ts-expect-error\n            HTMLCanvasElement.prototype.getContext = () => {\n                // Unhijack immediately\n                HTMLCanvasElement.prototype.getContext = getContext;\n                return props.gl;\n            };\n        }\n        const map = new this._MapClass(mapOptions);\n        // Props that are not part of constructor options\n        if (viewState.padding) {\n            map.setPadding(viewState.padding);\n        }\n        if (props.cursor) {\n            map.getCanvas().style.cursor = props.cursor;\n        }\n        this._createShadowTransform(map);\n        // Hack\n        // Insert code into map's render cycle\n        const renderMap = map._render;\n        map._render = (arg) => {\n            this._inRender = true;\n            renderMap.call(map, arg);\n            this._inRender = false;\n        };\n        const runRenderTaskQueue = map._renderTaskQueue.run;\n        map._renderTaskQueue.run = (arg) => {\n            runRenderTaskQueue.call(map._renderTaskQueue, arg);\n            this._onBeforeRepaint();\n        };\n        map.on('render', () => this._onAfterRepaint());\n        // Insert code into map's event pipeline\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        const fireEvent = map.fire;\n        map.fire = this._fireEvent.bind(this, fireEvent);\n        // add listeners\n        map.on('resize', () => {\n            this._renderTransform.resize(map.transform.width, map.transform.height);\n        });\n        map.on('styledata', () => {\n            this._updateStyleComponents(this.props, {});\n            // Projection can be set in stylesheet\n            syncProjection(map.transform, this._renderTransform);\n        });\n        map.on('sourcedata', () => this._updateStyleComponents(this.props, {}));\n        for (const eventName in pointerEvents) {\n            map.on(eventName, this._onPointerEvent);\n        }\n        for (const eventName in cameraEvents) {\n            map.on(eventName, this._onCameraEvent);\n        }\n        for (const eventName in otherEvents) {\n            map.on(eventName, this._onEvent);\n        }\n        this._map = map;\n    }\n    /* eslint-enable complexity,max-statements */\n    recycle() {\n        // Clean up unnecessary elements before storing for reuse.\n        const container = this.map.getContainer();\n        const children = container.querySelector('[mapboxgl-children]');\n        children === null || children === void 0 ? void 0 : children.remove();\n        Mapbox.savedMaps.push(this);\n    }\n    destroy() {\n        this._map.remove();\n    }\n    // Force redraw the map now. Typically resize() and jumpTo() is reflected in the next\n    // render cycle, which is managed by Mapbox's animation loop.\n    // This removes the synchronization issue caused by requestAnimationFrame.\n    redraw() {\n        const map = this._map;\n        // map._render will throw error if style does not exist\n        // https://github.com/mapbox/mapbox-gl-js/blob/fb9fc316da14e99ff4368f3e4faa3888fb43c513\n        //   /src/ui/map.js#L1834\n        if (!this._inRender && map.style) {\n            // cancel the scheduled update\n            if (map._frame) {\n                map._frame.cancel();\n                map._frame = null;\n            }\n            // the order is important - render() may schedule another update\n            map._render();\n        }\n    }\n    _createShadowTransform(map) {\n        const renderTransform = cloneTransform(map.transform);\n        map.painter.transform = renderTransform;\n        this._renderTransform = renderTransform;\n    }\n    /* Trigger map resize if size is controlled\n       @param {object} nextProps\n       @returns {bool} true if size has changed\n     */\n    _updateSize(nextProps) {\n        // Check if size is controlled\n        const { viewState } = nextProps;\n        if (viewState) {\n            const map = this._map;\n            if (viewState.width !== map.transform.width || viewState.height !== map.transform.height) {\n                map.resize();\n                return true;\n            }\n        }\n        return false;\n    }\n    // Adapted from map.jumpTo\n    /* Update camera to match props\n       @param {object} nextProps\n       @param {bool} triggerEvents - should fire camera events\n       @returns {bool} true if anything is changed\n     */\n    _updateViewState(nextProps, triggerEvents) {\n        if (this._internalUpdate) {\n            return false;\n        }\n        const map = this._map;\n        const tr = this._renderTransform;\n        // Take a snapshot of the transform before mutation\n        const { zoom, pitch, bearing } = tr;\n        const isMoving = map.isMoving();\n        if (isMoving) {\n            // All movement of the camera is done relative to the sea level\n            tr.cameraElevationReference = 'sea';\n        }\n        const changed = applyViewStateToTransform(tr, {\n            ...transformToViewState(map.transform),\n            ...nextProps\n        });\n        if (isMoving) {\n            // Reset camera reference\n            tr.cameraElevationReference = 'ground';\n        }\n        if (changed && triggerEvents) {\n            const deferredEvents = this._deferredEvents;\n            // Delay DOM control updates to the next render cycle\n            deferredEvents.move = true;\n            deferredEvents.zoom || (deferredEvents.zoom = zoom !== tr.zoom);\n            deferredEvents.rotate || (deferredEvents.rotate = bearing !== tr.bearing);\n            deferredEvents.pitch || (deferredEvents.pitch = pitch !== tr.pitch);\n        }\n        // Avoid manipulating the real transform when interaction/animation is ongoing\n        // as it would interfere with Mapbox's handlers\n        if (!isMoving) {\n            applyViewStateToTransform(map.transform, nextProps);\n        }\n        return changed;\n    }\n    /* Update camera constraints and projection settings to match props\n       @param {object} nextProps\n       @param {object} currProps\n       @returns {bool} true if anything is changed\n     */\n    _updateSettings(nextProps, currProps) {\n        const map = this._map;\n        let changed = false;\n        for (const propName of settingNames) {\n            if (propName in nextProps && !deepEqual(nextProps[propName], currProps[propName])) {\n                changed = true;\n                const setter = map[`set${propName[0].toUpperCase()}${propName.slice(1)}`];\n                setter === null || setter === void 0 ? void 0 : setter.call(map, nextProps[propName]);\n            }\n        }\n        return changed;\n    }\n    /* Update map style to match props\n       @param {object} nextProps\n       @param {object} currProps\n       @returns {bool} true if style is changed\n     */\n    _updateStyle(nextProps, currProps) {\n        if (nextProps.cursor !== currProps.cursor) {\n            this._map.getCanvas().style.cursor = nextProps.cursor || '';\n        }\n        if (nextProps.mapStyle !== currProps.mapStyle) {\n            const { mapStyle = DEFAULT_STYLE, styleDiffing = true } = nextProps;\n            const options = {\n                diff: styleDiffing\n            };\n            if ('localIdeographFontFamily' in nextProps) {\n                // @ts-ignore Mapbox specific prop\n                options.localIdeographFontFamily = nextProps.localIdeographFontFamily;\n            }\n            this._map.setStyle(normalizeStyle(mapStyle), options);\n            return true;\n        }\n        return false;\n    }\n    /* Update fog, light and terrain to match props\n       @param {object} nextProps\n       @param {object} currProps\n       @returns {bool} true if anything is changed\n     */\n    _updateStyleComponents(nextProps, currProps) {\n        const map = this._map;\n        let changed = false;\n        if (map.isStyleLoaded()) {\n            if ('light' in nextProps && map.setLight && !deepEqual(nextProps.light, currProps.light)) {\n                changed = true;\n                map.setLight(nextProps.light);\n            }\n            if ('fog' in nextProps && map.setFog && !deepEqual(nextProps.fog, currProps.fog)) {\n                changed = true;\n                map.setFog(nextProps.fog);\n            }\n            if ('terrain' in nextProps &&\n                map.setTerrain &&\n                !deepEqual(nextProps.terrain, currProps.terrain)) {\n                if (!nextProps.terrain || map.getSource(nextProps.terrain.source)) {\n                    changed = true;\n                    map.setTerrain(nextProps.terrain);\n                }\n            }\n        }\n        return changed;\n    }\n    /* Update interaction handlers to match props\n       @param {object} nextProps\n       @param {object} currProps\n       @returns {bool} true if anything is changed\n     */\n    _updateHandlers(nextProps, currProps) {\n        var _a, _b;\n        const map = this._map;\n        let changed = false;\n        for (const propName of handlerNames) {\n            const newValue = (_a = nextProps[propName]) !== null && _a !== void 0 ? _a : true;\n            const oldValue = (_b = currProps[propName]) !== null && _b !== void 0 ? _b : true;\n            if (!deepEqual(newValue, oldValue)) {\n                changed = true;\n                if (newValue) {\n                    map[propName].enable(newValue);\n                }\n                else {\n                    map[propName].disable();\n                }\n            }\n        }\n        return changed;\n    }\n    _queryRenderedFeatures(point) {\n        const map = this._map;\n        const tr = map.transform;\n        const { interactiveLayerIds = [] } = this.props;\n        try {\n            map.transform = this._renderTransform;\n            return map.queryRenderedFeatures(point, {\n                layers: interactiveLayerIds.filter(map.getLayer.bind(map))\n            });\n        }\n        catch (_a) {\n            // May fail if style is not loaded\n            return [];\n        }\n        finally {\n            map.transform = tr;\n        }\n    }\n    _updateHover(e) {\n        var _a;\n        const { props } = this;\n        const shouldTrackHoveredFeatures = props.interactiveLayerIds && (props.onMouseMove || props.onMouseEnter || props.onMouseLeave);\n        if (shouldTrackHoveredFeatures) {\n            const eventType = e.type;\n            const wasHovering = ((_a = this._hoveredFeatures) === null || _a === void 0 ? void 0 : _a.length) > 0;\n            const features = this._queryRenderedFeatures(e.point);\n            const isHovering = features.length > 0;\n            if (!isHovering && wasHovering) {\n                e.type = 'mouseleave';\n                this._onPointerEvent(e);\n            }\n            this._hoveredFeatures = features;\n            if (isHovering && !wasHovering) {\n                e.type = 'mouseenter';\n                this._onPointerEvent(e);\n            }\n            e.type = eventType;\n        }\n        else {\n            this._hoveredFeatures = null;\n        }\n    }\n    _fireEvent(baseFire, event, properties) {\n        const map = this._map;\n        const tr = map.transform;\n        const eventType = typeof event === 'string' ? event : event.type;\n        if (eventType === 'move') {\n            this._updateViewState(this.props, false);\n        }\n        if (eventType in cameraEvents) {\n            if (typeof event === 'object') {\n                event.viewState = transformToViewState(tr);\n            }\n            if (this._map.isMoving()) {\n                // Replace map.transform with ours during the callbacks\n                map.transform = this._renderTransform;\n                baseFire.call(map, event, properties);\n                map.transform = tr;\n                return map;\n            }\n        }\n        baseFire.call(map, event, properties);\n        return map;\n    }\n    // All camera manipulations are complete, ready to repaint\n    _onBeforeRepaint() {\n        const map = this._map;\n        // If there are camera changes driven by props, invoke camera events so that DOM controls are synced\n        this._internalUpdate = true;\n        for (const eventType in this._deferredEvents) {\n            if (this._deferredEvents[eventType]) {\n                map.fire(eventType);\n            }\n        }\n        this._internalUpdate = false;\n        const tr = this._map.transform;\n        // Make sure camera matches the current props\n        map.transform = this._renderTransform;\n        this._onAfterRepaint = () => {\n            // Mapbox transitions between non-mercator projection and mercator during render time\n            // Copy it back to the other\n            syncProjection(this._renderTransform, tr);\n            // Restores camera state before render/load events are fired\n            map.transform = tr;\n        };\n    }\n}\nMapbox.savedMaps = [];\n/**\n * Access token can be provided via one of:\n *   mapboxAccessToken prop\n *   access_token query parameter\n *   MapboxAccessToken environment variable\n *   REACT_APP_MAPBOX_ACCESS_TOKEN environment variable\n * @returns access token\n */\nfunction getAccessTokenFromEnv() {\n    let accessToken = null;\n    /* global location, process */\n    if (typeof location !== 'undefined') {\n        const match = /access_token=([^&\\/]*)/.exec(location.search);\n        accessToken = match && match[1];\n    }\n    // Note: This depends on bundler plugins (e.g. webpack) importing environment correctly\n    try {\n        accessToken = accessToken || process.env.MapboxAccessToken;\n    }\n    catch (_a) {\n        // ignore\n    }\n    try {\n        accessToken = accessToken || process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\n    }\n    catch (_b) {\n        // ignore\n    }\n    return accessToken;\n}\n//# sourceMappingURL=mapbox.js.map","/** These methods may break the react binding if called directly */\nconst skipMethods = [\n    'setMaxBounds',\n    'setMinZoom',\n    'setMaxZoom',\n    'setMinPitch',\n    'setMaxPitch',\n    'setRenderWorldCopies',\n    'setProjection',\n    'setStyle',\n    'addSource',\n    'removeSource',\n    'addLayer',\n    'removeLayer',\n    'setLayerZoomRange',\n    'setFilter',\n    'setPaintProperty',\n    'setLayoutProperty',\n    'setLight',\n    'setTerrain',\n    'setFog',\n    'remove'\n];\nexport default function createRef(mapInstance) {\n    if (!mapInstance) {\n        return null;\n    }\n    const map = mapInstance.map;\n    const result = {\n        getMap: () => map,\n        // Overwrite getters to use our shadow transform\n        getCenter: () => mapInstance.transform.center,\n        getZoom: () => mapInstance.transform.zoom,\n        getBearing: () => mapInstance.transform.bearing,\n        getPitch: () => mapInstance.transform.pitch,\n        getPadding: () => mapInstance.transform.padding,\n        getBounds: () => mapInstance.transform.getBounds(),\n        project: (lnglat) => {\n            const tr = map.transform;\n            map.transform = mapInstance.transform;\n            const result = map.project(lnglat);\n            map.transform = tr;\n            return result;\n        },\n        unproject: (point) => {\n            const tr = map.transform;\n            map.transform = mapInstance.transform;\n            const result = map.unproject(point);\n            map.transform = tr;\n            return result;\n        },\n        // options diverge between mapbox and maplibre\n        queryTerrainElevation: (lnglat, options) => {\n            const tr = map.transform;\n            map.transform = mapInstance.transform;\n            const result = map.queryTerrainElevation(lnglat, options);\n            map.transform = tr;\n            return result;\n        },\n        queryRenderedFeatures: (geometry, options) => {\n            const tr = map.transform;\n            map.transform = mapInstance.transform;\n            const result = map.queryRenderedFeatures(geometry, options);\n            map.transform = tr;\n            return result;\n        }\n    };\n    for (const key of getMethodNames(map)) {\n        // @ts-expect-error\n        if (!(key in result) && !skipMethods.includes(key)) {\n            result[key] = map[key].bind(map);\n        }\n    }\n    return result;\n}\nfunction getMethodNames(obj) {\n    const result = new Set();\n    let proto = obj;\n    while (proto) {\n        for (const key of Object.getOwnPropertyNames(proto)) {\n            if (key[0] !== '_' &&\n                typeof obj[key] === 'function' &&\n                key !== 'fire' &&\n                key !== 'setEventedParent') {\n                result.add(key);\n            }\n        }\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Array.from(result);\n}\n//# sourceMappingURL=create-ref.js.map","// From https://github.com/streamich/react-use/blob/master/src/useIsomorphicLayoutEffect.ts\n// useLayoutEffect but does not trigger warning in server-side rendering\nimport { useEffect, useLayoutEffect } from 'react';\nconst useIsomorphicLayoutEffect = typeof document !== 'undefined' ? useLayoutEffect : useEffect;\nexport default useIsomorphicLayoutEffect;\n//# sourceMappingURL=use-isomorphic-layout-effect.js.map","const globalSettings = [\n    'baseApiUrl',\n    'maxParallelImageRequests',\n    'workerClass',\n    'workerCount',\n    'workerUrl'\n];\nexport default function setGlobals(mapLib, props) {\n    for (const key of globalSettings) {\n        if (key in props) {\n            mapLib[key] = props[key];\n        }\n    }\n    const { RTLTextPlugin = 'https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js' } = props;\n    if (RTLTextPlugin &&\n        mapLib.getRTLTextPluginStatus &&\n        mapLib.getRTLTextPluginStatus() === 'unavailable') {\n        mapLib.setRTLTextPlugin(RTLTextPlugin, (error) => {\n            if (error) {\n                // eslint-disable-next-line\n                console.error(error);\n            }\n        }, true);\n    }\n}\n//# sourceMappingURL=set-globals.js.map","import * as React from 'react';\nimport { useState, useRef, useEffect, useContext, useMemo, useImperativeHandle } from 'react';\nimport { MountedMapsContext } from './use-map';\nimport Mapbox from '../mapbox/mapbox';\nimport createRef from '../mapbox/create-ref';\nimport useIsomorphicLayoutEffect from '../utils/use-isomorphic-layout-effect';\nimport setGlobals from '../utils/set-globals';\nexport const MapContext = React.createContext(null);\nexport default function Map(props, ref, defaultLib) {\n    const mountedMapsContext = useContext(MountedMapsContext);\n    const [mapInstance, setMapInstance] = useState(null);\n    const containerRef = useRef();\n    const { current: contextValue } = useRef({ mapLib: null, map: null });\n    useEffect(() => {\n        const mapLib = props.mapLib;\n        let isMounted = true;\n        let mapbox;\n        Promise.resolve(mapLib || defaultLib)\n            .then((module) => {\n            if (!isMounted) {\n                return;\n            }\n            if (!module) {\n                throw new Error('Invalid mapLib');\n            }\n            const mapboxgl = 'Map' in module ? module : module.default;\n            if (!mapboxgl.Map) {\n                throw new Error('Invalid mapLib');\n            }\n            // workerUrl & workerClass may change the result of supported()\n            // https://github.com/visgl/react-map-gl/discussions/2027\n            setGlobals(mapboxgl, props);\n            if (!mapboxgl.supported || mapboxgl.supported(props)) {\n                if (props.reuseMaps) {\n                    mapbox = Mapbox.reuse(props, containerRef.current);\n                }\n                if (!mapbox) {\n                    mapbox = new Mapbox(mapboxgl.Map, props, containerRef.current);\n                }\n                contextValue.map = createRef(mapbox);\n                contextValue.mapLib = mapboxgl;\n                setMapInstance(mapbox);\n                mountedMapsContext === null || mountedMapsContext === void 0 ? void 0 : mountedMapsContext.onMapMount(contextValue.map, props.id);\n            }\n            else {\n                throw new Error('Map is not supported by this browser');\n            }\n        })\n            .catch(error => {\n            const { onError } = props;\n            if (onError) {\n                onError({\n                    type: 'error',\n                    target: null,\n                    originalEvent: null,\n                    error\n                });\n            }\n            else {\n                console.error(error); // eslint-disable-line\n            }\n        });\n        return () => {\n            isMounted = false;\n            if (mapbox) {\n                mountedMapsContext === null || mountedMapsContext === void 0 ? void 0 : mountedMapsContext.onMapUnmount(props.id);\n                if (props.reuseMaps) {\n                    mapbox.recycle();\n                }\n                else {\n                    mapbox.destroy();\n                }\n            }\n        };\n    }, []);\n    useIsomorphicLayoutEffect(() => {\n        if (mapInstance) {\n            mapInstance.setProps(props);\n        }\n    });\n    useImperativeHandle(ref, () => contextValue.map, [mapInstance]);\n    const style = useMemo(() => ({\n        position: 'relative',\n        width: '100%',\n        height: '100%',\n        ...props.style\n    }), [props.style]);\n    const CHILD_CONTAINER_STYLE = {\n        height: '100%'\n    };\n    return (React.createElement(\"div\", { id: props.id, ref: containerRef, style: style }, mapInstance && (React.createElement(MapContext.Provider, { value: contextValue },\n        React.createElement(\"div\", { \"mapboxgl-children\": \"\", style: CHILD_CONTAINER_STYLE }, props.children)))));\n}\n//# sourceMappingURL=map.js.map","// This is a simplified version of\n// https://github.com/facebook/react/blob/4131af3e4bf52f3a003537ec95a1655147c81270/src/renderers/dom/shared/CSSPropertyOperations.js#L62\nconst unitlessNumber = /box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;\nexport function applyReactStyle(element, styles) {\n    if (!element || !styles) {\n        return;\n    }\n    const style = element.style;\n    for (const key in styles) {\n        const value = styles[key];\n        if (Number.isFinite(value) && !unitlessNumber.test(key)) {\n            style[key] = `${value}px`;\n        }\n        else {\n            style[key] = value;\n        }\n    }\n}\n//# sourceMappingURL=apply-react-style.js.map","/* global document */\nimport * as React from 'react';\nimport { createPortal } from 'react-dom';\nimport { useImperativeHandle, useEffect, useMemo, useRef, useContext, forwardRef, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport { MapContext } from './map';\nimport { arePointsEqual } from '../utils/deep-equal';\n/* eslint-disable complexity,max-statements */\nfunction Marker(props, ref) {\n    const { map, mapLib } = useContext(MapContext);\n    const thisRef = useRef({ props });\n    thisRef.current.props = props;\n    const marker = useMemo(() => {\n        let hasChildren = false;\n        React.Children.forEach(props.children, el => {\n            if (el) {\n                hasChildren = true;\n            }\n        });\n        const options = {\n            ...props,\n            element: hasChildren ? document.createElement('div') : null\n        };\n        const mk = new mapLib.Marker(options);\n        mk.setLngLat([props.longitude, props.latitude]);\n        mk.getElement().addEventListener('click', (e) => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onClick) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                type: 'click',\n                target: mk,\n                originalEvent: e\n            });\n        });\n        mk.on('dragstart', e => {\n            var _a, _b;\n            const evt = e;\n            evt.lngLat = marker.getLngLat();\n            (_b = (_a = thisRef.current.props).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, evt);\n        });\n        mk.on('drag', e => {\n            var _a, _b;\n            const evt = e;\n            evt.lngLat = marker.getLngLat();\n            (_b = (_a = thisRef.current.props).onDrag) === null || _b === void 0 ? void 0 : _b.call(_a, evt);\n        });\n        mk.on('dragend', e => {\n            var _a, _b;\n            const evt = e;\n            evt.lngLat = marker.getLngLat();\n            (_b = (_a = thisRef.current.props).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, evt);\n        });\n        return mk;\n    }, []);\n    useEffect(() => {\n        marker.addTo(map.getMap());\n        return () => {\n            marker.remove();\n        };\n    }, []);\n    const { longitude, latitude, offset, style, draggable = false, popup = null, rotation = 0, rotationAlignment = 'auto', pitchAlignment = 'auto' } = props;\n    useEffect(() => {\n        applyReactStyle(marker.getElement(), style);\n    }, [style]);\n    useImperativeHandle(ref, () => marker, []);\n    if (marker.getLngLat().lng !== longitude || marker.getLngLat().lat !== latitude) {\n        marker.setLngLat([longitude, latitude]);\n    }\n    if (offset && !arePointsEqual(marker.getOffset(), offset)) {\n        marker.setOffset(offset);\n    }\n    if (marker.isDraggable() !== draggable) {\n        marker.setDraggable(draggable);\n    }\n    if (marker.getRotation() !== rotation) {\n        marker.setRotation(rotation);\n    }\n    if (marker.getRotationAlignment() !== rotationAlignment) {\n        marker.setRotationAlignment(rotationAlignment);\n    }\n    if (marker.getPitchAlignment() !== pitchAlignment) {\n        marker.setPitchAlignment(pitchAlignment);\n    }\n    if (marker.getPopup() !== popup) {\n        marker.setPopup(popup);\n    }\n    return createPortal(props.children, marker.getElement());\n}\nexport default memo(forwardRef(Marker));\n//# sourceMappingURL=marker.js.map","import { createPortal } from 'react-dom';\nimport { useImperativeHandle, useEffect, useMemo, useRef, useContext, forwardRef, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport { MapContext } from './map';\nimport { deepEqual } from '../utils/deep-equal';\n// Adapted from https://github.com/mapbox/mapbox-gl-js/blob/v1.13.0/src/ui/popup.js\nfunction getClassList(className) {\n    return new Set(className ? className.trim().split(/\\s+/) : []);\n}\n/* eslint-disable complexity,max-statements */\nfunction Popup(props, ref) {\n    const { map, mapLib } = useContext(MapContext);\n    const container = useMemo(() => {\n        return document.createElement('div');\n    }, []);\n    const thisRef = useRef({ props });\n    thisRef.current.props = props;\n    const popup = useMemo(() => {\n        const options = { ...props };\n        const pp = new mapLib.Popup(options);\n        pp.setLngLat([props.longitude, props.latitude]);\n        pp.once('open', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onOpen) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        return pp;\n    }, []);\n    useEffect(() => {\n        const onClose = e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onClose) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        };\n        popup.on('close', onClose);\n        popup.setDOMContent(container).addTo(map.getMap());\n        return () => {\n            // https://github.com/visgl/react-map-gl/issues/1825\n            // onClose should not be fired if the popup is removed by unmounting\n            // When using React strict mode, the component is mounted twice.\n            // Firing the onClose callback here would be a false signal to remove the component.\n            popup.off('close', onClose);\n            if (popup.isOpen()) {\n                popup.remove();\n            }\n        };\n    }, []);\n    useEffect(() => {\n        applyReactStyle(popup.getElement(), props.style);\n    }, [props.style]);\n    useImperativeHandle(ref, () => popup, []);\n    if (popup.isOpen()) {\n        if (popup.getLngLat().lng !== props.longitude || popup.getLngLat().lat !== props.latitude) {\n            popup.setLngLat([props.longitude, props.latitude]);\n        }\n        if (props.offset && !deepEqual(popup.options.offset, props.offset)) {\n            popup.setOffset(props.offset);\n        }\n        if (popup.options.anchor !== props.anchor || popup.options.maxWidth !== props.maxWidth) {\n            popup.options.anchor = props.anchor;\n            popup.setMaxWidth(props.maxWidth);\n        }\n        if (popup.options.className !== props.className) {\n            const prevClassList = getClassList(popup.options.className);\n            const nextClassList = getClassList(props.className);\n            for (const c of prevClassList) {\n                if (!nextClassList.has(c)) {\n                    popup.removeClassName(c);\n                }\n            }\n            for (const c of nextClassList) {\n                if (!prevClassList.has(c)) {\n                    popup.addClassName(c);\n                }\n            }\n            popup.options.className = props.className;\n        }\n    }\n    return createPortal(props.children, container);\n}\nexport default memo(forwardRef(Popup));\n//# sourceMappingURL=popup.js.map","import { useContext, useMemo, useEffect } from 'react';\nimport { MapContext } from './map';\nfunction useControl(onCreate, arg1, arg2, arg3) {\n    const context = useContext(MapContext);\n    const ctrl = useMemo(() => onCreate(context), []);\n    useEffect(() => {\n        const opts = (arg3 || arg2 || arg1);\n        const onAdd = typeof arg1 === 'function' && typeof arg2 === 'function' ? arg1 : null;\n        const onRemove = typeof arg2 === 'function' ? arg2 : typeof arg1 === 'function' ? arg1 : null;\n        const { map } = context;\n        if (!map.hasControl(ctrl)) {\n            map.addControl(ctrl, opts === null || opts === void 0 ? void 0 : opts.position);\n            if (onAdd) {\n                onAdd(context);\n            }\n        }\n        return () => {\n            if (onRemove) {\n                onRemove(context);\n            }\n            // Map might have been removed (parent effects are destroyed before child ones)\n            if (map.hasControl(ctrl)) {\n                map.removeControl(ctrl);\n            }\n        };\n    }, []);\n    return ctrl;\n}\nexport default useControl;\n//# sourceMappingURL=use-control.js.map","import { useEffect, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nfunction AttributionControl(props) {\n    const ctrl = useControl(({ mapLib }) => new mapLib.AttributionControl(props), {\n        position: props.position\n    });\n    useEffect(() => {\n        applyReactStyle(ctrl._container, props.style);\n    }, [props.style]);\n    return null;\n}\nexport default memo(AttributionControl);\n//# sourceMappingURL=attribution-control.js.map","import { useEffect, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nfunction FullscreenControl(props) {\n    const ctrl = useControl(({ mapLib }) => new mapLib.FullscreenControl({\n        container: props.containerId && document.getElementById(props.containerId)\n    }), { position: props.position });\n    useEffect(() => {\n        applyReactStyle(ctrl._controlContainer, props.style);\n    }, [props.style]);\n    return null;\n}\nexport default memo(FullscreenControl);\n//# sourceMappingURL=fullscreen-control.js.map","import { useImperativeHandle, useRef, useEffect, forwardRef, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nfunction GeolocateControl(props, ref) {\n    const thisRef = useRef({ props });\n    const ctrl = useControl(({ mapLib }) => {\n        const gc = new mapLib.GeolocateControl(props);\n        // Hack: fix GeolocateControl reuse\n        // When using React strict mode, the component is mounted twice.\n        // GeolocateControl's UI creation is asynchronous. Removing and adding it back causes the UI to be initialized twice.\n        // @ts-expect-error private method\n        const setupUI = gc._setupUI;\n        // @ts-expect-error private method\n        gc._setupUI = args => {\n            if (!gc._container.hasChildNodes()) {\n                setupUI(args);\n            }\n        };\n        gc.on('geolocate', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onGeolocate) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('error', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onError) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('outofmaxbounds', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onOutOfMaxBounds) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('trackuserlocationstart', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onTrackUserLocationStart) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('trackuserlocationend', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onTrackUserLocationEnd) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        return gc;\n    }, { position: props.position });\n    thisRef.current.props = props;\n    useImperativeHandle(ref, () => ctrl, []);\n    useEffect(() => {\n        applyReactStyle(ctrl._container, props.style);\n    }, [props.style]);\n    return null;\n}\nexport default memo(forwardRef(GeolocateControl));\n//# sourceMappingURL=geolocate-control.js.map","import { useEffect, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nfunction NavigationControl(props) {\n    const ctrl = useControl(({ mapLib }) => new mapLib.NavigationControl(props), {\n        position: props.position\n    });\n    useEffect(() => {\n        applyReactStyle(ctrl._container, props.style);\n    }, [props.style]);\n    return null;\n}\nexport default memo(NavigationControl);\n//# sourceMappingURL=navigation-control.js.map","import { useEffect, useRef, memo } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nfunction ScaleControl(props) {\n    const ctrl = useControl(({ mapLib }) => new mapLib.ScaleControl(props), {\n        position: props.position\n    });\n    const propsRef = useRef(props);\n    const prevProps = propsRef.current;\n    propsRef.current = props;\n    const { style } = props;\n    if (props.maxWidth !== undefined && props.maxWidth !== prevProps.maxWidth) {\n        ctrl.options.maxWidth = props.maxWidth;\n    }\n    if (props.unit !== undefined && props.unit !== prevProps.unit) {\n        ctrl.setUnit(props.unit);\n    }\n    useEffect(() => {\n        applyReactStyle(ctrl._container, style);\n    }, [style]);\n    return null;\n}\nexport default memo(ScaleControl);\n//# sourceMappingURL=scale-control.js.map","export default function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message);\n    }\n}\n//# sourceMappingURL=assert.js.map","import { useContext, useEffect, useMemo, useState, useRef } from 'react';\nimport { MapContext } from './map';\nimport assert from '../utils/assert';\nimport { deepEqual } from '../utils/deep-equal';\n/* eslint-disable complexity, max-statements */\nfunction updateLayer(map, id, props, prevProps) {\n    assert(props.id === prevProps.id, 'layer id changed');\n    assert(props.type === prevProps.type, 'layer type changed');\n    if (props.type === 'custom' || prevProps.type === 'custom') {\n        return;\n    }\n    const { layout = {}, paint = {}, filter, minzoom, maxzoom, beforeId } = props;\n    if (beforeId !== prevProps.beforeId) {\n        map.moveLayer(id, beforeId);\n    }\n    if (layout !== prevProps.layout) {\n        const prevLayout = prevProps.layout || {};\n        for (const key in layout) {\n            if (!deepEqual(layout[key], prevLayout[key])) {\n                map.setLayoutProperty(id, key, layout[key]);\n            }\n        }\n        for (const key in prevLayout) {\n            if (!layout.hasOwnProperty(key)) {\n                map.setLayoutProperty(id, key, undefined);\n            }\n        }\n    }\n    if (paint !== prevProps.paint) {\n        const prevPaint = prevProps.paint || {};\n        for (const key in paint) {\n            if (!deepEqual(paint[key], prevPaint[key])) {\n                map.setPaintProperty(id, key, paint[key]);\n            }\n        }\n        for (const key in prevPaint) {\n            if (!paint.hasOwnProperty(key)) {\n                map.setPaintProperty(id, key, undefined);\n            }\n        }\n    }\n    if (!deepEqual(filter, prevProps.filter)) {\n        map.setFilter(id, filter);\n    }\n    if (minzoom !== prevProps.minzoom || maxzoom !== prevProps.maxzoom) {\n        map.setLayerZoomRange(id, minzoom, maxzoom);\n    }\n}\nfunction createLayer(map, id, props) {\n    // @ts-ignore\n    if (map.style && map.style._loaded && (!('source' in props) || map.getSource(props.source))) {\n        const options = { ...props, id };\n        delete options.beforeId;\n        // @ts-ignore\n        map.addLayer(options, props.beforeId);\n    }\n}\n/* eslint-enable complexity, max-statements */\nlet layerCounter = 0;\nfunction Layer(props) {\n    const map = useContext(MapContext).map.getMap();\n    const propsRef = useRef(props);\n    const [, setStyleLoaded] = useState(0);\n    const id = useMemo(() => props.id || `jsx-layer-${layerCounter++}`, []);\n    useEffect(() => {\n        if (map) {\n            const forceUpdate = () => setStyleLoaded(version => version + 1);\n            map.on('styledata', forceUpdate);\n            forceUpdate();\n            return () => {\n                map.off('styledata', forceUpdate);\n                // @ts-ignore\n                if (map.style && map.style._loaded && map.getLayer(id)) {\n                    map.removeLayer(id);\n                }\n            };\n        }\n        return undefined;\n    }, [map]);\n    // @ts-ignore\n    const layer = map && map.style && map.getLayer(id);\n    if (layer) {\n        try {\n            updateLayer(map, id, props, propsRef.current);\n        }\n        catch (error) {\n            console.warn(error); // eslint-disable-line\n        }\n    }\n    else {\n        createLayer(map, id, props);\n    }\n    // Store last rendered props\n    propsRef.current = props;\n    return null;\n}\nexport default Layer;\n//# sourceMappingURL=layer.js.map","import * as React from 'react';\nimport { useContext, useEffect, useMemo, useState, useRef } from 'react';\nimport { cloneElement } from 'react';\nimport { MapContext } from './map';\nimport assert from '../utils/assert';\nimport { deepEqual } from '../utils/deep-equal';\nlet sourceCounter = 0;\nfunction createSource(map, id, props) {\n    // @ts-ignore\n    if (map.style && map.style._loaded) {\n        const options = { ...props };\n        delete options.id;\n        delete options.children;\n        // @ts-ignore\n        map.addSource(id, options);\n        return map.getSource(id);\n    }\n    return null;\n}\n/* eslint-disable complexity */\nfunction updateSource(source, props, prevProps) {\n    assert(props.id === prevProps.id, 'source id changed');\n    assert(props.type === prevProps.type, 'source type changed');\n    let changedKey = '';\n    let changedKeyCount = 0;\n    for (const key in props) {\n        if (key !== 'children' && key !== 'id' && !deepEqual(prevProps[key], props[key])) {\n            changedKey = key;\n            changedKeyCount++;\n        }\n    }\n    if (!changedKeyCount) {\n        return;\n    }\n    const type = props.type;\n    if (type === 'geojson') {\n        source.setData(props.data);\n    }\n    else if (type === 'image') {\n        source.updateImage({\n            url: props.url,\n            coordinates: props.coordinates\n        });\n    }\n    else if ('setCoordinates' in source && changedKeyCount === 1 && changedKey === 'coordinates') {\n        source.setCoordinates(props.coordinates);\n    }\n    else if ('setUrl' in source && changedKey === 'url') {\n        source.setUrl(props.url);\n    }\n    else if ('setTiles' in source && changedKey === 'tiles') {\n        source.setTiles(props.tiles);\n    }\n    else {\n        // eslint-disable-next-line\n        console.warn(`Unable to update <Source> prop: ${changedKey}`);\n    }\n}\n/* eslint-enable complexity */\nfunction Source(props) {\n    const map = useContext(MapContext).map.getMap();\n    const propsRef = useRef(props);\n    const [, setStyleLoaded] = useState(0);\n    const id = useMemo(() => props.id || `jsx-source-${sourceCounter++}`, []);\n    useEffect(() => {\n        if (map) {\n            /* global setTimeout */\n            const forceUpdate = () => setTimeout(() => setStyleLoaded(version => version + 1), 0);\n            map.on('styledata', forceUpdate);\n            forceUpdate();\n            return () => {\n                var _a;\n                map.off('styledata', forceUpdate);\n                // @ts-ignore\n                if (map.style && map.style._loaded && map.getSource(id)) {\n                    // Parent effects are destroyed before child ones, see\n                    // https://github.com/facebook/react/issues/16728\n                    // Source can only be removed after all child layers are removed\n                    const allLayers = (_a = map.getStyle()) === null || _a === void 0 ? void 0 : _a.layers;\n                    if (allLayers) {\n                        for (const layer of allLayers) {\n                            // @ts-ignore (2339) source does not exist on all layer types\n                            if (layer.source === id) {\n                                map.removeLayer(layer.id);\n                            }\n                        }\n                    }\n                    map.removeSource(id);\n                }\n            };\n        }\n        return undefined;\n    }, [map]);\n    // @ts-ignore\n    let source = map && map.style && map.getSource(id);\n    if (source) {\n        updateSource(source, props, propsRef.current);\n    }\n    else {\n        source = createSource(map, id, props);\n    }\n    propsRef.current = props;\n    return ((source &&\n        React.Children.map(props.children, child => child &&\n            cloneElement(child, {\n                source: id\n            }))) ||\n        null);\n}\nexport default Source;\n//# sourceMappingURL=source.js.map","import * as React from 'react';\nimport { default as _Map } from './components/map';\nimport { default as _Marker } from './components/marker';\nimport { default as _Popup } from './components/popup';\nimport { default as _AttributionControl } from './components/attribution-control';\nimport { default as _FullscreenControl } from './components/fullscreen-control';\nimport { default as _GeolocateControl } from './components/geolocate-control';\nimport { default as _NavigationControl } from './components/navigation-control';\nimport { default as _ScaleControl } from './components/scale-control';\nimport { default as _Layer } from './components/layer';\nimport { default as _Source } from './components/source';\nimport { useMap as _useMap } from './components/use-map';\nexport function useMap() {\n    return _useMap();\n}\nconst mapLib = import('mapbox-gl');\nexport const Map = (() => {\n    return React.forwardRef(function Map(props, ref) {\n        return _Map(props, ref, mapLib);\n    });\n})();\nexport const Marker = _Marker;\nexport const Popup = _Popup;\nexport const AttributionControl = _AttributionControl;\nexport const FullscreenControl = _FullscreenControl;\nexport const NavigationControl = _NavigationControl;\nexport const GeolocateControl = _GeolocateControl;\nexport const ScaleControl = _ScaleControl;\nexport const Layer = _Layer;\nexport const Source = _Source;\nexport { default as useControl } from './components/use-control';\nexport { MapProvider } from './components/use-map';\nexport default Map;\n// Types\nexport * from './types/public';\nexport * from './types/style-spec-mapbox';\n//# sourceMappingURL=exports-mapbox.js.map"],"mappings":"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"}