<?xml version="1.0" ?>
<!DOCTYPE config SYSTEM "http://www.matsim.org/files/dtd/config_v2.dtd">
<config>

	<module name="global">
		<param name="randomSeed" value="4711" />
		<param name="coordinateSystem" value="EPSG:2157" />  <!-- ✅ Cork ITM -->
	</module>

	<module name="network">
		<param name="inputNetworkFile" value="cork_network.xml" />
	</module>

	<module name="plans">
		<param name="inputPlansFile" value="cork_city_plans_FINAL.xml" />
	</module>

	<module name="controller">
		<param name="outputDirectory" value="./output1" />
		<param name="lastIteration" value="10" />  <!-- ✅ Increased -->
		<param name="writeEventsInterval" value="1" />
		<param name="writePlansInterval" value="1" />
	</module>

	<module name="scoring">
		<param name="lateArrival" value="-18" />
		<param name="performing" value="+6" />
		
		<!-- ✅ Fixed activity type names -->
		<parameterset type="activityParams">
			<param name="activityType" value="h" />
			<param name="typicalDuration" value="12:00:00" />
		</parameterset>
		
		<parameterset type="activityParams">
			<param name="activityType" value="w" />
			<param name="typicalDuration" value="08:00:00" />
			<param name="openingTime" value="07:00:00" />
			<param name="closingTime" value="18:00:00" />
		</parameterset>
		
		<!-- ✅ Added mode-specific parameters -->
		<parameterset type="modeParams">
			<param name="mode" value="car"/>
			<param name="constant" value="0.0"/>
			<param name="marginalUtilityOfTraveling_util_hr" value="-6.0"/>
		</parameterset>
		
		<parameterset type="modeParams">
			<param name="mode" value="walk"/>
			<param name="constant" value="0.0"/>
			<param name="marginalUtilityOfTraveling_util_hr" value="-12.0"/>
		</parameterset>
		
		<parameterset type="modeParams">
			<param name="mode" value="bike"/>
			<param name="constant" value="-1.0"/>
			<param name="marginalUtilityOfTraveling_util_hr" value="-10.0"/>
		</parameterset>
		
		<parameterset type="modeParams">
			<param name="mode" value="bus"/>
			<param name="constant" value="-2.0"/>
			<param name="marginalUtilityOfTraveling_util_hr" value="-6.0"/>
		</parameterset>
		
		<parameterset type="modeParams">
			<param name="mode" value="car_passenger"/>
			<param name="constant" value="-1.0"/>
			<param name="marginalUtilityOfTraveling_util_hr" value="-6.0"/>
		</parameterset>
	</module>
	<module name="planscalcroute">
    	<param name="networkModes" value="car"/>
	</module>
	
	<module name="replanning">
		<parameterset type="strategysettings">
			<param name="strategyName" value="BestScore" />
			<param name="weight" value="0.7" />  <!-- ✅ Adjusted for more exploration -->
		</parameterset>
		<parameterset type="strategysettings">
			<param name="strategyName" value="ReRoute" />
			<param name="weight" value="0.2" />
		</parameterset>
		<parameterset type="strategysettings">
			<param name="strategyName" value="TimeAllocationMutator" />
			<param name="weight" value="0.1" />
		</parameterset>
	</module>

	<module name="qsim">
		<param name="startTime" value="00:00:00" />
		<param name="endTime" value="30:00:00" />
		<param name="mainMode" value="car" />  <!-- ✅ Added car_passenger -->
		<param name="flowCapacityFactor" value="1.0" />
		<param name="storageCapacityFactor" value="1.0" />
		<param name="trafficDynamics" value="queue" />
		<param name="vehiclesSource" value="defaultVehicle" />
		<param name="removeStuckVehicles" value="true" />
		<param name="stuckTime" value="10.0" />
	</module>

	<!-- ✅✅ NEW: Configure routing for all teleported modes ✅✅ -->
	<module name="routing">
		<!-- car_passenger: Teleported mode (doesn't use network, just calculates travel time) -->
		<parameterset type="teleportedModeParameters">
			<param name="mode" value="car_passenger" />
			<param name="teleportedModeSpeed" value="13.88" />  <!-- ~50 km/h in m/s (slightly slower than car) -->
			<param name="beelineDistanceFactor" value="1.3" />  <!-- Road network detour factor -->
		</parameterset>
		
		<!-- walk: Teleported mode -->
		<parameterset type="teleportedModeParameters">
			<param name="mode" value="walk" />
			<param name="teleportedModeSpeed" value="1.34" />  <!-- ~5 km/h walking speed -->
			<param name="beelineDistanceFactor" value="1.3" />
		</parameterset>
		
		<!-- bike: Teleported mode -->
		<parameterset type="teleportedModeParameters">
			<param name="mode" value="bike" />
			<param name="teleportedModeSpeed" value="4.17" />  <!-- ~15 km/h cycling -->
			<param name="beelineDistanceFactor" value="1.3" />
		</parameterset>
		
		<!-- bus: Teleported mode (simple version - no actual transit schedule) -->
		<parameterset type="teleportedModeParameters">
			<param name="mode" value="bus" />
			<param name="teleportedModeSpeed" value="8.33" />  <!-- ~30 km/h (slower due to stops) -->
			<param name="beelineDistanceFactor" value="1.5" />  <!-- Less direct routes than car -->
		</parameterset>
	</module>

</config>
